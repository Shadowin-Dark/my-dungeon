{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/data/map/map.js","webpack:///./src/data/map/player.js","webpack:///./src/data/context.js","webpack:///./src/data/store.js","webpack:///./src/data/actions/move.js","webpack:///./src/layout/layout.modules.css","webpack:///./src/layout/play_field.js","webpack:///./src/data/map/field_list.js","webpack:///./src/component/map.modules.css","webpack:///./src/component/field.modules.css","webpack:///./src/component/map.js","webpack:///./src/component/details.modules.css","webpack:///./src/component/details.js","webpack:///./src/component/player.js","webpack:///./src/component/menu.js","webpack:///./src/app_panel.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","buildMap","map","row","keyID","fieldID","hide","initPlay","players","id","STR","DEX","INT","HP","ATK","D","V","MAG","DEF","SPD","R","F","EXP","StoreContext","React","createContext","buildInitState","x","y","playerNum","state","playerPos","focused","reducer","action","type","playerID","positions","ajustPositions","forEach","pos","Store","Provider","memo","children","useReducer","dispatch","Customer","CMP","useContext","Reset","size","Header","Layout","Sider","Content","Footer","PlayField","Menu","Players","Actions","Map","Details","className","styles","style","background","FieldList","description","sideEffect","movestart","user","movein","moveout","battle","monster","moveend","onFocus","console","log","playerPosMap","positionMap","targetPosition","width","mapUnit","userID","undefined","MapUnit","marginLeft","onClick","options","fieldStyles","field0","field","WeiboOutlined","QqOutlined","onClose","player","Player","useState","showDetails","setShowDetails","NewGameModal","visible","setVisible","onNewGame","form","Form","useForm","title","onOk","getFieldValue","height","onCancel","labelCol","span","wrapperCol","initialValues","Item","label","rules","min","max","Settings","showNew","setShowNew","menu","overlay","e","preventDefault","DownOutlined","AppPanel","App","props","ifShowDetails","ReactDOM","render","document","getElementById"],"mappings":"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","file":"reactApp-c5d3d1acc9120e84dbef.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/my-dungeon/publish/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"tjUo\",0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const buildMap = (n, m) => {\n  const map = [];\n  for (let i = 0; i < n; i++) {\n    const row = [];\n    for (let j = 0; j < m; j++) {\n      row.push({\n        keyID: `map-unit-${i}-${j}`,\n        fieldID: 1,\n        hide: true\n      });\n    }\n    map.push(row);\n  }\n  return map;\n};\n","// player\n// 1. id\n// 2. STR\n// 3. DEX\n// 4. INT\n// 5. HP\n// 6. ATK\n// 7. MAG\n// 8. DEF\n// 9. SPD\n// 10. EXP\n// 11. RIGHT\n// 12. LEFT\n// 13. HEAD\n// 14. ARMOR\n// 15. SHOES\n// 16. ACCESSOR\n\nexport const initPlay = n => {\n  const players = [];\n  for (let i = 0; i < n; i++) {\n    players.push({\n      id: i + 1,\n      STR: 4,\n      DEX: 4,\n      INT: 4,\n      HP: 20,\n      ATK: { D: 2, V: 0 },\n      MAG: { D: 2, V: 0 },\n      DEF: 2,\n      SPD: { R: 2, F: 2 },\n      EXP: 0\n      // RIGHT: 0,\n      // LEFT: 0,\n      // HEAD: 0,\n      // ARMOR: 0,\n      // SHOES: 0,\n      // ACCESSOR: 0,\n    });\n  }\n  return players;\n};\n","import React from 'react';\n\nexport const StoreContext = React.createContext({});\n","import React, { useContext, useReducer } from 'react';\nimport { buildMap } from './map/map';\nimport { initPlay } from './map/player';\nimport { StoreContext } from './context';\nimport { ajustPositions } from './actions/move';\n\nconst buildInitState = (x, y, playerNum = 1) => {\n  const state = {\n    map: buildMap(x, y),\n    players: initPlay(playerNum),\n    playerPos: [],\n    focused: { x: -1, y: -1 }\n  };\n  for (let i = 0; i < playerNum; i++) {\n    state.playerPos[i] = { x: 0, y: 0 };\n  }\n  return state;\n};\n\nconst reducer = (state, action) => {\n  // console.log('reduce',state,action);\n  switch (action.type) {\n    case 'RESET': {\n      return action.value;\n    }\n    case 'FOCUS': {\n      const { x, y } = action.value;\n      if (state.focused.x === x && state.focused.y === y) {\n        return state;\n      }\n      state.focused = { x, y };\n      return { ...state };\n    }\n    case 'MOVE': {\n      const { x, y, playerID } = action.value;\n      state.map[x][y].hide = false;\n      ajustPositions(state.map, x, y).forEach(pos => {\n        state.map[pos.x][pos.y].hide = false;\n      });\n      state.playerPos[playerID] = { x, y };\n      return { ...state };\n    }\n    default:\n      return state;\n  }\n};\n\nconst Reset = ({ size, playerNum, dispatch }) => {\n  const { x, y } = size;\n  const initState = buildInitState(x, y, playerNum);\n  dispatch({ type: 'RESET', value: initState });\n};\n\nconst Provider = React.memo(({ children }) => {\n  const [state, dispatch] = useReducer(reducer, buildInitState(0, 0));\n\n  return <StoreContext.Provider value={{ state, dispatch }}>{children}</StoreContext.Provider>;\n});\n\nconst Customer = CMP =>\n  React.memo(() => {\n    const { state, dispatch } = useContext(StoreContext);\n    // const actions = {\n    //   focus: (x,y) => dispatch({type:'FOCUS', value:{x,y}}),\n    // move: (x,y) =>\n    // }\n    return <CMP state={state} dispatch={dispatch} />;\n  });\n\nexport const Store = {\n  Provider,\n  Customer,\n  Reset\n};\n","export const ajustPositions = (map, x, y) => {\n  const n = map.length;\n  let m = 0;\n  if (n > 0) {\n    m = map[0].length;\n  }\n\n  const positions = [];\n\n  if (y > 0) {\n    positions.push({ x, y: y - 1 });\n  }\n  if (y < m - 1) {\n    positions.push({ x, y: y + 1 });\n  }\n  if (x > 0) {\n    positions.push({ x: x - 1, y });\n    if (x % 2 === 1 && y > 0) {\n      positions.push({ x: x - 1, y: y - 1 });\n    } else if (x % 2 === 0 && y < m - 1) {\n      positions.push({ x: x - 1, y: y + 1 });\n    }\n  }\n  if (x < n - 1) {\n    positions.push({ x: x + 1, y });\n    if (x % 2 === 1 && y > 0) {\n      positions.push({ x: x + 1, y: y - 1 });\n    } else if (x % 2 === 0 && y < m - 1) {\n      positions.push({ x: x + 1, y: y + 1 });\n    }\n  }\n  return positions;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"layout\":\"layout-modules__layout___1vCOx\",\"left-panel\":\"layout-modules__left-panel___1e39D\",\"leftPanel\":\"layout-modules__left-panel___1e39D\",\"playground\":\"layout-modules__playground___1L4mF\"};","import React from 'react';\nimport { Layout } from 'antd';\n\nimport styles from './layout.modules.css';\n\nconst { Header, Sider, Content, Footer } = Layout;\n\nexport const PlayField = React.memo(({ Menu, Players, Actions, Map, Details }) => {\n  return (\n    <Layout className={styles.layout}>\n      <Sider>\n        <Layout>\n          <Header>{Menu}</Header>\n          <Content>{Players}</Content>\n          <Footer>{Actions}</Footer>\n        </Layout>\n      </Sider>\n      <Content style={{ background: '#bfd8ee' }} className={styles.playground}>\n        {Map}\n      </Content>\n      {Details && <Sider>{Details}</Sider>}\n    </Layout>\n  );\n});\n","export const FieldList = [\n  {\n    id: 0,\n    name: '隐藏',\n    description: '地块被隐藏'\n  },\n  {\n    id: 1,\n    name: '测试1',\n    description: '这是一块空地',\n    sideEffect: {\n      movestart: user => user,\n      movein: [0, user => user],\n      moveout: [0, user => user],\n      battle: (user, monster) => [user, monster],\n      moveend: user => user\n    }\n  },\n  {\n    id: 2,\n    name: '测试2',\n    description: '进入这里需要额外1SPD',\n    sideEffect: {\n      movestart: user => user,\n      movein: [0, user => user],\n      moveout: [0, user => user],\n      battle: (user, monster) => [user, monster],\n      moveend: user => user\n    }\n  }\n];\n","// extracted by mini-css-extract-plugin\nexport default {\"boxFw\":\"map-modules__boxFw___3X_uc\",\"focused\":\"map-modules__focused___3E_dP\"};","// extracted by mini-css-extract-plugin\nexport default {\"field0\":\"field-modules__field0___uKcyF\",\"field1\":\"field-modules__field1___1WjUk\"};","import React from 'react';\nimport { QqOutlined, WeiboOutlined } from '@ant-design/icons';\n\nimport { FieldList } from '../data/map/field_list';\n\nimport styles from './map.modules.css';\nimport fieldStyles from './field.modules.css';\n\nconst targetPosition = positions => {\n  const positionMap = {};\n  for (let i = 0; i < positions.length; i++) {\n    positionMap[`${positions[i].x}:${positions[i].y}`] = i;\n  }\n  return positionMap;\n};\n\nconst size = map => {\n  const n = map.length;\n  let m = 0;\n  if (n > 0) {\n    m = map[0].length;\n  }\n  return [n, m];\n};\n\nexport const Map = React.memo(({ map, playerPos, focused, onFocus }) => {\n  console.log('Rendering Map');\n  const playerPosMap = targetPosition(playerPos);\n  const [, m] = size(map);\n  return (\n    <ul className={styles.boxFw} style={{ width: `${m * 135 + 100}px` }}>\n      {map.map((row, i) => {\n        return row.map((mapUnit, j) => {\n          const userID = playerPosMap[`${i}:${j}`] !== undefined ? playerPosMap[`${i}:${j}`] : -1;\n          const className = i === focused.x && j === focused.y ? styles.focused : '';\n          return (\n            <MapUnit\n              key={mapUnit.keyID}\n              className={className}\n              style={{ marginLeft: j === 0 && i % 2 === 0 ? '70px' : '2px' }}\n              mapUnit={mapUnit}\n              userID={userID}\n              onClick={() => onFocus(i, j)}\n            />\n          );\n        });\n      })}\n    </ul>\n  );\n});\n\nconst MapUnit = React.memo(({ mapUnit, userID, className, ...options }) => {\n  if (mapUnit.hide) {\n    return (\n      <li {...options} className={`${className} ${fieldStyles.field0}`}>\n        <div>?</div>\n      </li>\n    );\n  }\n\n  const field = FieldList[mapUnit.fieldID];\n  return (\n    <li {...options} className={`${className} ${fieldStyles[`field${field.id}`]}`}>\n      <div>{`${field.name}`}</div>\n      {mapUnit.monster && (\n        <div>\n          <WeiboOutlined />\n        </div>\n      )}\n      {userID >= 0 && (\n        <div>\n          <QqOutlined />\n        </div>\n      )}\n    </li>\n  );\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"close-button\":\"details-modules__close-button___196_Y\",\"closeButton\":\"details-modules__close-button___196_Y\",\"field-title\":\"details-modules__field-title___1Q1CK\",\"fieldTitle\":\"details-modules__field-title___1Q1CK\",\"field-description\":\"details-modules__field-description___3n-pL\",\"fieldDescription\":\"details-modules__field-description___3n-pL\"};","import React from 'react';\nimport { FieldList } from '../data/map/field_list';\n\nimport styles from './details.modules.css';\n\nexport const Details = React.memo(({ mapUnit, onClose }) => {\n  const { hide, fieldID } = mapUnit;\n  const field = FieldList[fieldID];\n\n  if (hide) {\n    return (\n      <div>\n        <button className={styles.closeButton} onClick={onClose} type=\"button\">\n          x\n        </button>\n        <div className={styles.fieldTitle}>?</div>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <button className={styles.closeButton} onClick={onClose} type=\"button\">\n        x\n      </button>\n      <div className={styles.fieldTitle}>{field.name}</div>\n      <div className={styles.fieldDescription}>{field.description}</div>\n    </div>\n  );\n});\n","import React, { useState } from 'react';\n\nexport const Players = React.memo(({ players }) => {\n  console.log('Rendering Players');\n  return (\n    <>\n      {players.map(player => (\n        <Player key={player.id} player={player} />\n      ))}\n    </>\n  );\n});\n\nconst Player = React.memo(({ player }) => {\n  const [showDetails, setShowDetails] = useState(true);\n  return (\n    <>\n      <div onClick={() => setShowDetails(!showDetails)}>{`Player ${player.id}`}</div>\n      {showDetails && (\n        <>\n          <div>{`STR: ${player.STR}`}</div>\n          <div>{`DEX:${player.DEX}`}</div>\n          <div>{`INT:${player.INT}`}</div>\n          <div>{`HP: ${player.HP}`}</div>\n          <div>{`ATK: ${player.ATK.D}D + ${player.ATK.V}`}</div>\n          <div>{`MAG: ${player.MAG.D}D + ${player.MAG.V}`}</div>\n          <div>{`DEF:${player.DEF}`}</div>\n          <div>{`EXP:${player.EXP}`}</div>\n          <div>{`SPD:${player.SPD.R}/${player.SPD.F}`}</div>\n        </>\n      )}\n    </>\n  );\n});\n","import React from 'react';\n\nimport { Menu, Dropdown, Modal, Form, InputNumber } from 'antd';\nimport { DownOutlined } from '@ant-design/icons';\n\nconst NewGameModal = React.memo(({ visible, setVisible, onNewGame }) => {\n  const [form] = Form.useForm();\n  const layout = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 }\n  };\n\n  const handleOk = () => {\n    const { height, width, players } = form.getFieldValue();\n    onNewGame(height, width, players);\n    setVisible(false);\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  return (\n    <Modal title=\"Start a New Game\" visible={visible} onOk={handleOk} onCancel={handleCancel}>\n      <Form {...layout} form={form} initialValues={{ height: 3, width: 4, players: 1 }}>\n        <Form.Item\n          name={['height']}\n          label=\"Height of the Map\"\n          rules={[{ type: 'number', min: 0, max: 99 }]}\n        >\n          <InputNumber />\n        </Form.Item>\n        <Form.Item\n          name={['width']}\n          label=\"Width of the Map\"\n          rules={[{ type: 'number', min: 0, max: 99 }]}\n        >\n          <InputNumber />\n        </Form.Item>\n        <Form.Item\n          name={['players']}\n          label=\"Player Number\"\n          rules={[{ type: 'number', min: 0, max: 4 }]}\n        >\n          <InputNumber />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n});\n\nexport const Settings = React.memo(({ onNewGame }) => {\n  const [showNew, setShowNew] = React.useState(false);\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <div onClick={() => setShowNew(true)}>New Game</div>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <>\n      <Dropdown overlay={menu}>\n        {/* eslint-disable-next-line */}\n        <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n          MENU <DownOutlined />\n        </a>\n      </Dropdown>\n      <NewGameModal visible={showNew} setVisible={setShowNew} onNewGame={onNewGame} />\n    </>\n  );\n});\n","import React from 'react';\nimport { Store } from './data/store';\nimport { PlayField } from './layout/play_field';\nimport { Map } from './component/map';\nimport { Details } from './component/details';\nimport { Players } from './component/player';\nimport { Settings as Menu } from './component/menu';\n\nimport 'antd/dist/antd.css';\n\n// import styles from './styles.modules.css';\n\nexport const AppPanel = React.memo(() => {\n  return (\n    <Store.Provider>\n      <App />\n    </Store.Provider>\n  );\n});\n\nconst App = Store.Customer(\n  React.memo(props => {\n    const { state, dispatch } = props;\n    const { map, playerPos, focused } = state;\n\n    console.log('state', state);\n    const ifShowDetails = !(focused.x === -1 && focused.y === -1);\n    const onNewGame = (x, y, playerNum) => {\n      Store.Reset({ size: { x, y }, playerNum, dispatch });\n      state.playerPos.forEach((pos, id) => {\n        dispatch({ type: 'MOVE', value: { x: pos.x, y: pos.y, playerID: id } });\n      });\n    };\n\n    const onFocus = (x, y) => dispatch({ type: 'FOCUS', value: { x, y } });\n    const move = () =>\n      dispatch({ type: 'MOVE', value: { x: focused.x, y: focused.y, playerID: 0 } });\n    return (\n      <PlayField\n        Menu={<Menu onNewGame={onNewGame} />}\n        Players={<Players players={state.players} />}\n        Actions={\n          <div>\n            <button type=\"submit\" onClick={move}>\n              Move\n            </button>\n          </div>\n        }\n        Map={<Map map={map} playerPos={playerPos} focused={focused} onFocus={onFocus} />}\n        Details={\n          ifShowDetails && (\n            <Details\n              mapUnit={map[focused.x][focused.y]}\n              onClose={() => dispatch({ type: 'FOCUS', value: { x: -1, y: -1 } })}\n            />\n          )\n        }\n      />\n    );\n  })\n);\n","import ReactDOM from 'react-dom';\nimport { AppPanel } from './app_panel';\n\nReactDOM.render(<AppPanel />, document.getElementById('app'));\n"],"sourceRoot":""}